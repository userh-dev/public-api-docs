<!DOCTYPE html>

<html class="h-100" lang="pt">

    <head>

        <title>Referência de APIs da UseRH</title>

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta name="description" content="Visão geral das APIs da UseRH." />

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    </head>

<body class="bg-dark d-flex flex-column h-100">

    <main class="flex-shrink-0">
        <div class="container text-white mt-5">

            <div class="row">
        
              <div class="col-sm-1"></div>
        
              <div class="col-sm-10">
                  <h1>Referência de APIs (Homologação)</h1>
        
                  <div class="accordion accordion-flush mt-3 text-black" id="accordionFlushExample">
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="flush-headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                          Autenticação
                        </button>
                      </h2>
                      <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <p>URL Base: <code>https://account.hmg.userh.host</code></p>
        
                            <p>Endpoint de Autorização: <code><strong>GET</strong> https://account.hmg.userh.host/oauth/authorize</code></p>
        
                            <p>Endpoint para gerar tokens: <code><strong>POST</strong> https://account.hmg.userh.host/oauth/token</code></p>
        
                            <p>Endpoint de informações do usuário logado: <code><strong>GET</strong> https://account.hmg.userh.host/api/user</code></p>
        
                            <p>A autenticação/autorização da UseRH utiliza o framework OAuth 2.0, que foi implementado utilizando a biblioteca Laravel Passport. O consumidor das nossas APIs precisará gerar um código de acesso utilizando o <strong>Flow de Código de Autorização com PKCE</strong>.</p>
        
                            <p>Um exemplo de como gerar o código está incluso na <a href="https://laravel.com/docs/9.x/passport#code-grant-pkce">documentação do Laravel Passport</a> (em Inglês).</p>

                            <p>A ideia é obter um código de autorização utilizando o endpoint de autorização (com PKCE). Uma vez que usuário faça o login e autorize a ação, nosso servidor de autenticação irá redirecionar o usuário de volta para a aplicação consumidora, que por sua vez poderá utilizar o código de autorição para gerar um token de acesso. Com um token de acesso válido, a aplicação consumidora poderá acessar as informações do usuário logado através do endpoint especificado acima, assim como qualquer outro endpoint protegido por autenticação das nossas APIs (mais informações nas seções abaixo).</p>
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="flush-headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                          Demais Endpoints de Administração
                        </button>
                      </h2>
                      <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <p>URL Base: <code>https://api.hmg.userh.host</code></p>
        
                            <a class="btn btn-primary" href="../admin/index.html" role="button">Acessar a documentação dos endpoints</a>
        
                            <div class="alert alert-warning mt-3" role="alert">
                              Importante: Substitua <code>/api/v1</code> por <code>/v1/admin</code> para usar os endpoints com a URL base. Lembre-se também de incluir o cabeçalho  <code>Authorization</code> nas requisições com o token de acesso obtido através da nossa autenticação.
                            </div>
                        </div>
                      </div>
                    </div>
                  </div>
        
        
              </div>
        
              <div class="col-sm-1"></div>
        
            </div>
        
          </div>
    </main>

    <footer class="footer mt-auto py-3">
        <div class="container">
            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-10">
                  <p class="text-white">This website is also available in <a href="../index.html">English</a>.</p>
                  <span class="text-white">© 2022 UseRH. Todos os direitos reservados.</span>
                </div>
                <div class="col-sm-1"></div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>

</body>

</html>